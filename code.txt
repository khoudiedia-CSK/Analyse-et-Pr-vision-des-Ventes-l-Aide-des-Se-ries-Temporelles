# 1. Importer les bibliothèques nécessaires
import pandas as pd
import matplotlib.pyplot as plt

# 2. Charger les données
df = pd.read_csv(r"C:\Users\arbi\Desktop\projet4\retail_store_inventory.csv")

# 3. Convertir la colonne 'Date' en format datetime
df['Date'] = pd.to_datetime(df['Date'])

# 4. Filtrer les données pour un seul produit et un seul magasin
# Exemple : Produit P0001 dans le magasin S001
df_sample = df[(df['Product ID'] == 'P0001') & (df['Store ID'] == 'S001')]

# 5. Grouper les ventes par date
sales_by_date = df_sample.groupby('Date')['Units Sold'].sum().reset_index()

# 6. Afficher les premières lignes
print(sales_by_date.head())

# 7. Tracer la série temporelle
plt.figure(figsize=(12, 5))
plt.plot(sales_by_date['Date'], sales_by_date['Units Sold'], marker='o')
plt.title("Ventes quotidiennes – Produit P0001 / Magasin S001")
plt.xlabel("Date")
plt.ylabel("Units Sold")
plt.grid(True)
plt.tight_layout()
plt.show()

from prophet import Prophet

# Préparer les données pour Prophet
df_prophet = sales_by_date.rename(columns={'Date': 'ds', 'Units Sold': 'y'})

# Créer et entraîner le modèle
model = Prophet()
model.fit(df_prophet)

# Créer un DataFrame pour les 30 prochains jours
future = model.make_future_dataframe(periods=30)

# Faire la prédiction
forecast = model.predict(future)

# Afficher la prédiction
fig1 = model.plot(forecast)
fig1.show()
